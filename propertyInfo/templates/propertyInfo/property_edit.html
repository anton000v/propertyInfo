{% extends 'propertyInfo/base.html' %}
{#{% load staticfiles %}#}
{% load static %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/property_new.css' %}">
    <form method="POST" class="post-form" enctype="multipart/form-data"> {% csrf_token %}


        {{ form.as_p }}

        {#        <div class="container">#}
        {#            <div class="row h-100 justify-content-center align-items-center">#}
        {#                <div class="col">#}
        {#                    {{ formset.media }}#}
        {#                    {% for cur_form in formset.forms %}#}
        {#                        {{ cur_form.instance.id }}#}
        {#                        <div class="individual-form">#}
        {#                            {{ cur_form.as_p }}#}
        {#                        </div>#}
        {##}
        {#                    {% endfor %}#}
        {#                    {{ formset.management_form }}#}
        {##}
        {#                </div>#}
        {#                <div class="col">#}
        {#                    {% for form in layoutFormset %}#}
        {#                        <div class="individual-form2">#}
        {#                            {{ form.as_p }}#}
        {#                        </div>#}
        {#                    {% endfor %}#}
        {#                    {{ layoutFormset.management_form }}#}
        {#                </div>#}
        {#            </div>#}
        {#        </div>#}
        {#            {{ formset.as_table }}#}
        {#                    <table border="0" cellpadding="0" cellspacing="0">#}
        {#                        <tbody>#}
        {#                            {% for form in formset.forms %}#}
        {#                            <tr>#}
        {#                               <td>#}
        {#                                  {% if form.instance.pk %}{{ form.DELETE }}{% endif %}#}
        {#                                  {{ form.buildingImage }}#}
        {#                               </td>#}
        {#                            </tr>#}
        {#                            {% endfor %}#}
        {#                        </tbody>#}
        {#                    </table>#}
        {#            {{ formset.management_form }}#}


        <center><h3>FormSet example</h3></center>


        {#        <input type="button" value="Add More" id="add_more">#}
        {#        <div id="empty_form" style="display:none">#}
        {#            <table class='no_error'>#}
        {#                {{ formset.empty_form }}#}
        {#            </table>#}
        {#        </div>#}


        <div class="container">
            <div class="row h-100 justify-content-center align-items-center">
                <div class="col">
                    {{ formset.media }}
                    <div id="form_set">
                        {% for form in formset.forms %}
                            {{ form.non_field_errors }}
                            {{ form.errors }}
                            <table class='no_error'>
                                {{ form.instance.id }}
                                {{ form.as_p }}
                            </table>
                        {% endfor %}
                        {{ formset.management_form }}
                    </div>
                </div>
                <div class="col">
                    {{ layoutFormset.media }}
                    <div id="form_set">
                        {% for form in layoutFormset.forms %}
                            {{ form.non_field_errors }}
                            {{ form.errors }}
                            <table class='no_error'>
                                {{ form.instance.id }}
                                {{ form.as_p }}

                            </table>
                        {% endfor %}
                        {{ layoutFormset.management_form }}
                    </div>
                </div>
            </div>
        </div>

        {% for form in wayFormset %}
            {{ form.as_p }}
            <br>
        {% endfor %}
        {{ wayFormset.management_form }}

        <input type="submit" name="save" value="Сохранить">

    </form>

{% endblock %}


{% block custom_js %}
    <script src="{% static "dynamic_formsets/jquery.formset.js" %}" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}js/jquery.js"></script>
    <script src="{{ STATIC_URL }}js/jquery.formset.js"></script>

{#    <script type="text/javascript">#}
{#        var $sR = $("select#special");#}
{#        var $sP = $("select#ddlProvince");#}
{#        var $sPclone = $sP.clone();#}
{##}
{#        function updateProvinceList() {#}
{#            var regName = $sR.find("option:selected").text();#}
{#            if ($sR.val() > 0) {#}
{#                $sP.find("optgroup").remove();#}
{#                $sP.append($sPclone.find("optgroup[label='" + regName + "']").clone());#}
{#            } else {#}
{#                $sP.find("optgroup").remove();#}
{#                $sP.append($sPclone.find("optgroup").clone());#}
{#            }#}
{#        }#}
{##}
{#        $("select#ddlRegioni").on("change", function (e) {#}
{#            updateProvinceList();#}
{#        });#}
{#    </script>#}

    {#    <script type="text/javascript">#}
    {#        $('#add_more').click(function () {#}
    {#            var form_idx = $('#id_form-TOTAL_FORMS').val();#}
    {#            $('#form_set').append($('#empty_form').html().replace(/__prefix__/g, form_idx));#}
    {#            $('#id_form-TOTAL_FORMS').val(parseInt(form_idx) + 1);#}
    {#        });#}
    {#    </script>#}

    <script type="text/javascript">
        $('.individual-form').formset(
            {
                prefix: '{{ formset.prefix }}',
                formCssClass: 'dynamic-formset',
                uiText: {

                    addPrompt: 'Добавить еще одну',         // Text used on the 'add a new form' control.
                    removePrompt: 'Удалить',        // Text used on the 'delete this existing form' control.
                },
            }
        );
        $('.individual-form2').formset({
            prefix: '{{ layoutFormset.prefix }}',
            formCssClass: 'dynamic-formset',
            uiText: {
                addPrompt: 'Добавить еще одну',         // Text used on the 'add a new form' control.
                removePrompt: 'Удалить',        // Text used on the 'delete this existing form' control.
            },
        });
    </script>

{% endblock %}